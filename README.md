# Fake-Rest

Fake-Rest is used to create REST controllers for test your projects

### Getting started

Requirements for build
- Java 8+
- NPM

Build project
```
mvn clean install -DskipTests
```

Start application
```
cd <project-folder>/appbuild/target
java -jar FakeRest.jar
```
Open browser
```
http://localhost:8080
```

### Configuration
#### Controllers configuration
Controllers configuration contains parameters:
- URI - base uri with or without pattern
- Method - GET, POST, PUT, DELETE
- Answer - need for init data in controller collection or specify static returning data
- GenerateId - flag for POST method. Should generate id or should use from body request
- GenerateIdPatterns - UUID, Sequence. It is used if generateId is true.
- DelayMs - time to delay answer

Controller works in 2 modes:

- Static - return specified data from 'answer' or request body that you send.
- Collection - services with collection, where you can make CRUD operations

Example static configuration:

| Method                 |Uri       |Real mapped Uri|Answer        | Function                                             |
|------------------------|----------|-------------- |--------------|------------------------------------------------------|
| GET, POST, PUT, DELETE |/test     |/test          |example       | Return 'example'                                     |
| POST, PUT, DELETE      |/test     |/test          |              | Return data from body or Bad Request if body is empty|
| GET                    |/test     |/test          |              | Return empty answer                                  |

For collection mode should configure uri with id in brackets '{', '}'. Id param can have any name.

Collection controllers can be specified with multiple ids.

You should use the same general base uri to connect collection controllers to each other

Example collection configuration:

|Method|Uri       |Real mapped Uri|Answer        |GenerateId |GenerateIdPatterns| Function                                                                       |
|------|----------|-------------- |--------------|-----------|------------------|--------------------------------------------------------------------------------|
|GET   |/test/{id}|/test/         |{"id":"1"}    |           |                  | Add json to collection on init. Return all records                             |
|      |          |/test/{id}     |              |           |                  | Return record by id                                                            |
|POST  |/test/{id}|/test/         |{"id":"1"}    |           |                  | Added json to collection on init. Create new records. Expected id in body json |
|POST  |/test/{id}|/test/         |              |true       |                  | Create new records. Id "id" will be generated by sequence                      |
|POST  |/test/{id}|/test/         |              |true       |id:UUID           | Create new records. Id "id" will be generated by uuid                          |
|PUT   |/test/{id}|/test/{id}     |              |           |                  | Update record by id. Rewrite id in body json from url value                    |
|DELETE|/test/{id}|/test/{id}     |              |           |                  | Delete record by id                                                            |

### Configuration routers
Routers configuration contains parameters:
- URI - base uri with or without pattern
- Method - GET, POST, PUT, DELETE
- toUrl - uri or url what need to route request to

If you configure method like GET, router will consume GET and send request to toUrl using same method.

Example routers configuration:

|Method|Uri       |ToUrl    |Function                                          |
|------|----------|---------|--------------------------------------------------|
|GET   |/test/{id}|/test    |Resends from uri with pattern to static controller|
